# === h2k-endpoint: логирование в stdout для journald ===
# Короткий шаблон без timestamps/threads (journald их добавит сам). Для разовой диагностики см. альтернативный шаблон ниже.
# Консоль — единственный активный аппендер по умолчанию; ротация файлов отключена.
log4j.appender.h2k_stdout=org.apache.log4j.ConsoleAppender
log4j.appender.h2k_stdout.encoding=UTF-8
log4j.appender.h2k_stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.h2k_stdout.layout.ConversionPattern=%-5p %c{1} - %m%n
# Диагностический шаблон (для временного включения при расследованиях):
# log4j.appender.h2k_stdout.layout.ConversionPattern=%-5p %c{1} %X{table} %X{region} - %m%n
log4j.appender.h2k_stdout.Threshold=INFO

# Более читабельные стектрейсы (Log4j 1.2.17+)
log4j.throwableRenderer=org.apache.log4j.EnhancedThrowableRenderer
# Явно включаем немедленный флэш для консоли (на всякий случай)
log4j.appender.h2k_stdout.ImmediateFlush=true

# (Опционально) приглушить шум от Kafka AppInfoParser (MBean). Раскомментируйте при необходимости.
# log4j.logger.org.apache.kafka.common.utils.AppInfoParser=ERROR

# === Уровни логирования (шум гасим, наши сообщения — по делу) ===
# Наш пакет по умолчанию — INFO. Всё детальное уводим в DEBUG точечно по классам ниже.
log4j.logger.kz.qazmarka.h2k=INFO,h2k_stdout
log4j.additivity.kz.qazmarka.h2k=false

# Тише сторонние библиотеки (можно поднять до INFO при расследованиях)
log4j.logger.org.apache.kafka=WARN
log4j.logger.org.apache.zookeeper=WARN
log4j.logger.org.apache.hadoop=WARN
log4j.logger.org.apache.hadoop.hbase=WARN
log4j.logger.org.apache.phoenix=WARN
# Но оставим информацию о репликации HBase видимой
log4j.logger.org.apache.hadoop.hbase.replication=INFO

# Точечные переключатели DEBUG для наших классов (раскомментируйте по необходимости)
# log4j.logger.kz.qazmarka.h2k.endpoint.KafkaReplicationEndpoint=DEBUG
# log4j.logger.kz.qazmarka.h2k.kafka.BatchSender=DEBUG
# log4j.logger.kz.qazmarka.h2k.kafka.TopicEnsurer=DEBUG
# log4j.logger.kz.qazmarka.h2k.schema.ValueCodecPhoenix=DEBUG
# log4j.logger.kz.qazmarka.h2k.config.H2kConfig=DEBUG
# log4j.logger.kz.qazmarka.h2k.payload.PayloadBuilder=DEBUG
# log4j.logger.kz.qazmarka.h2k.schema.JsonSchemaRegistry=DEBUG

# === (Опционально) Асинхронная консоль для снижения влияния логов на горячий путь ===
# Включайте только если stdout не является критическим каналом синхронной диагностики
#log4j.appender.async=org.apache.log4j.AsyncAppender
#log4j.appender.async.BufferSize=1024
#log4j.appender.async.AppenderRef=h2k_stdout
#log4j.logger.kz.qazmarka.h2k=INFO,async